{% set classes = [
  'bef-links',
  is_nested ? 'bef-nested'
] %}


{% set is_nested = true %}
{% for name, value in hiddens %}
	<input type="hidden" name="{{ name }}" value="{{ value }}"/>
{% endfor %}

<div{{attributes.removeClass('form-select').addClass(classes)}}>
	{% set current_nesting_level = 0 %}
	{% for child in children %}
		{% set item = attribute(element, child) %}


		{% set item = item|merge({
  '#attributes': item['#attributes']|merge({
    'class': (item['#attributes'].class|default([]))|merge([
      child in selected ? 'active' : '',
      '[.active]:border-black flex h-[42px] items-center justify-center rounded-full border border-transparent bg-[#F3F4F6] p-4 text-sm capitalize transition-all'
    ])
  })
}) %}

		{% set new_nesting_level = attribute(depth, child) ?? 0 %}
		{% set delta = (current_nesting_level - new_nesting_level) |abs %}

		{% if loop.first %}
        <div class="tabs mb-16 w-full flex-shrink-0 md:mb-[100px]- mt-10">
			<ul class="flex flex-wrap items-center gap-2 md:gap-4">
			{% else %}
				{% if delta %}
					{% for i in 1..delta %}
						{% if new_nesting_level > current_nesting_level %}
							<ul>
						{% else %}
							</ul>
						{% endif %}
					{% endfor %}
				{% endif %}
			{% endif %}

			<li>
				{{ item }}
				{% if loop.last %}
					{% for i in new_nesting_level..0 %}
					</li>
				</ul>
                </div>
			{% endfor %}
		{% endif %}

		{% set current_nesting_level = new_nesting_level %}
	{% endfor %}
</div>
